# Story 8.6: Connect Reschedule/Cancel UI to API

## Status
Approved

## Story

**As a** dispatcher,
**I want** the reschedule and cancel UI to use real APIs,
**so that** I can actually reschedule and cancel jobs.

## Acceptance Criteria

1. **Reschedule Integration:** Reschedule UI calls PUT /jobs/{id}/reschedule
2. **Cancel Integration:** Cancel UI calls POST /jobs/{id}/cancel
3. **Replace Mock:** All mock logic replaced with API calls
4. **Success Handling:** Success messages and UI updates
5. **Error Handling:** Proper error messages
6. **Loading States:** Loading indicators during operations
7. **Real-time Updates:** UI updates via SignalR on events
8. **User Feedback:** Clear feedback for operations
9. **Type Safety:** TypeScript types match API
10. **User Experience:** Smooth operation flow

## Tasks / Subtasks

- [ ] Update reschedule UI
  - [ ] Replace mock reschedule with API call
  - [ ] Call PUT /jobs/{id}/reschedule
  - [ ] Send new time slot
- [ ] Update cancel UI
  - [ ] Replace mock cancel with API call
  - [ ] Call POST /jobs/{id}/cancel
  - [ ] Handle confirmation
- [ ] Add success handling
  - [ ] Show success messages
  - [ ] Update job status in UI
  - [ ] Refresh job list
- [ ] Add error handling
  - [ ] Display API errors
  - [ ] Handle conflicts
  - [ ] Handle validation errors
- [ ] Add loading states
  - [ ] Show loading indicators
  - [ ] Disable interactions during operations
- [ ] Integrate SignalR
  - [ ] Listen for JobRescheduled event
  - [ ] Listen for JobCancelled event
  - [ ] Update UI on events
- [ ] Add user feedback
  - [ ] Success toast notifications
  - [ ] Error toast notifications
  - [ ] Clear messaging

## Dev Notes

### Relevant Source Tree Info
- Reschedule components: `frontend/components/jobs/`
- Cancel components: `frontend/components/jobs/`
- API client: `frontend/lib/api/generated/api-client.ts`

### Architecture References
- **API Endpoints:** Reschedule and cancel endpoints - see Stories 8.2, 8.3
- **SignalR Events:** JobRescheduled, JobCancelled - see Story 8.5
- **UI Components:** Frontend components exist

### Testing Standards
- **Test Location:** `frontend/__tests__/`
- **Component Tests:** Test API integration, error handling
- **E2E Tests:** Playwright tests for reschedule/cancel flow

### UI Integration Notes
- **Existing UI:** Reschedule/cancel UI is 95% complete with mock logic
- **Components:** Job details view has reschedule/cancel actions
- **Mock Logic:** Currently simulates operations - needs API replacement

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-XX | 1.0 | Initial story created | Sarah (PO) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_

