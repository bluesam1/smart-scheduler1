# Story 9.1: Settings API (Job Types & Skills)

## Status
Approved

## Story

**As a** system administrator,
**I want** to manage job types and skills via API,
**so that** I can configure the system's available options.

## Acceptance Criteria

1. **GET /settings/job-types:** List all job types
2. **POST /settings/job-types:** Add new job type
3. **PUT /settings/job-types:** Update existing job type
4. **DELETE /settings/job-types:** Remove job type (with validation)
5. **GET /settings/skills:** List all skills
6. **POST /settings/skills:** Add new skill
7. **PUT /settings/skills:** Update existing skill
8. **DELETE /settings/skills:** Remove skill (with validation)
9. **Authorization:** Admin-only access
10. **Validation:** Cannot delete if in use

## Tasks / Subtasks

- [ ] Create SystemConfiguration entity
  - [ ] Create entity in domain
  - [ ] Support JobTypes and Skills types
  - [ ] Configure EF Core mapping
- [ ] Create Settings DTOs
  - [ ] Create request/response DTOs
  - [ ] Match API specification
- [ ] Implement MediatR commands/queries
  - [ ] Create queries for getting job types/skills
  - [ ] Create commands for CRUD operations
  - [ ] Create handlers
- [ ] Implement repository
  - [ ] Implement SystemConfigurationRepository
  - [ ] Support type filtering
- [ ] Create API endpoints
  - [ ] Job types endpoints (GET, POST, PUT, DELETE)
  - [ ] Skills endpoints (GET, POST, PUT, DELETE)
- [ ] Add validation
  - [ ] Validate in-use check before delete
  - [ ] Validate uniqueness
  - [ ] Validate required fields
- [ ] Add authorization
  - [ ] Admin-only policy
  - [ ] Verify permissions
- [ ] Create database migration
  - [ ] Create SystemConfiguration table
  - [ ] Seed default values

## Dev Notes

### Relevant Source Tree Info
- Entity: `src/SmartScheduler.Domain/System/Entities/SystemConfiguration.cs`
- API endpoints: `src/SmartScheduler.Api/Endpoints/Settings/`
- Commands/Queries: `src/SmartScheduler.Application/Settings/`

### Architecture References
- **API Specification:** See `docs/architecture/api-specification.md` for Settings endpoints
- **Data Models:** See `docs/architecture/data-models.md` for SystemConfiguration
- **Default Values:** See data models for default job types and skills

### Testing Standards
- **Test Location:** `src/SmartScheduler.Api.Tests/`
- **API Tests:** Test all CRUD operations, validation, authorization

### UI Integration Notes
- Settings UI exists (see `frontend/app/settings/page.tsx`)
- Frontend uses these endpoints
- UI is 95% complete - needs API integration

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-XX | 1.0 | Initial story created | Sarah (PO) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_

