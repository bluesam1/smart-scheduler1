# Story 2.3: Connect Job UI to API

## Status
Approved

## Story

**As a** dispatcher,
**I want** the job list and creation forms to use real API data,
**so that** I can manage real jobs in the system.

## Acceptance Criteria

1. **Job List Integration:** JobsTable loads from GET /jobs
2. **Create Job Integration:** CreateJobDialog submits to POST /jobs
3. **Job Details Integration:** Job details view loads from GET /jobs/{id}
4. **Address Input:** AddressInput component integrates with Google Places API
5. **Error Handling:** Proper error messages for API failures
6. **Loading States:** Loading indicators during API calls
7. **Real-time Updates:** Job list updates when jobs created/updated (SignalR)
8. **Form Validation:** Client-side validation matches backend validation
9. **Success Feedback:** Success messages after job creation
10. **Type Safety:** TypeScript types match backend DTOs

## Tasks / Subtasks

- [ ] Update JobsTable component
  - [ ] Replace mock data with GET /jobs API call
  - [ ] Add loading state
  - [ ] Add error handling
  - [ ] Implement status/priority filtering
- [ ] Update CreateJobDialog
  - [ ] Connect to POST /jobs API
  - [ ] Handle address validation response
  - [ ] Handle timezone lookup
  - [ ] Show validation errors from API
  - [ ] Show success message
  - [ ] Refresh job list after creation
- [ ] Update JobDetailsView
  - [ ] Load job details from GET /jobs/{id}
  - [ ] Display all job information
  - [ ] Handle 404 errors
- [ ] Integrate AddressInput with Google Places
  - [ ] Configure Google Places Autocomplete
  - [ ] Get Place Details on selection
  - [ ] Send structured address to backend
- [ ] Add SignalR integration
  - [ ] Subscribe to job-related events
  - [ ] Update job list on JobCreated event
  - [ ] Update job details on JobUpdated event
- [ ] Add error handling
  - [ ] Display API error messages
  - [ ] Handle network errors
  - [ ] Handle validation errors

## Dev Notes

### Relevant Source Tree Info
- Frontend components: `frontend/components/jobs/`
- API client: `frontend/lib/api/generated/api-client.ts`
- Address input: `frontend/components/ui/address-input.tsx`

### Architecture References
- **API Specification:** See `docs/architecture/api-specification.md` for job endpoints
- **Address Validation:** See `docs/architecture/api-specification.md` section "Address Validation Integration"
- **UI Components:** Frontend components already exist - see `frontend/components/jobs/`

### Testing Standards
- **Test Location:** `frontend/__tests__/`
- **Component Tests:** Test API integration, loading states, error handling
- **E2E Tests:** Playwright tests for job CRUD flow

### UI Integration Notes
- **Existing UI:** Job UI is 95% complete with mock data
- **Components to Update:**
  - `frontend/components/jobs/jobs-table.tsx` - replace mock data
  - `frontend/components/jobs/create-job-dialog.tsx` - connect to API
  - `frontend/components/jobs/job-details-view.tsx` - connect to API
- **Mock Data:** Currently in component files
- **Google Places:** Frontend needs Google Places API key configuration

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-XX | 1.0 | Initial story created | Sarah (PO) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_

