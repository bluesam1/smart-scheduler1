# Story 1.5: Skills Management & Normalization

## Status
Approved

## Story

**As a** system,
**I want** skills to be normalized and managed consistently,
**so that** skill matching works correctly across contractors and jobs.

## Acceptance Criteria

1. **Skill Normalization:** Skills normalized (trimmed, lowercase) on input
2. **Skill Validation:** Skills validated against system configuration
3. **Skill Matching:** Case-insensitive skill matching for compatibility checks
4. **Skill List:** Skills managed through Settings API (see Epic 9)
5. **Normalization Service:** Service to normalize skill strings
6. **Validation Rules:** Skills must exist in system configuration
7. **Bulk Normalization:** Multiple skills normalized in batch
8. **Skill Comparison:** Efficient skill set comparison for matching
9. **Data Consistency:** Existing skills normalized in database
10. **Documentation:** Skill normalization rules documented

## Tasks / Subtasks

- [ ] Create skill normalization service
  - [ ] Create `ISkillNormalizationService` interface
  - [ ] Implement normalization (trim, lowercase)
  - [ ] Handle edge cases (empty, whitespace-only)
- [ ] Implement skill validation
  - [ ] Validate skills against SystemConfiguration
  - [ ] Return clear error messages for invalid skills
- [ ] Create skill matching utilities
  - [ ] Create skill set comparison methods
  - [ ] Implement subset checking (job skills âŠ† contractor skills)
  - [ ] Optimize for performance
- [ ] Update contractor/job creation
  - [ ] Normalize skills in CreateContractorCommand
  - [ ] Normalize skills in CreateJobCommand
  - [ ] Validate skills against configuration
- [ ] Create data migration
  - [ ] Migration to normalize existing skills in database
  - [ ] Verify no data loss
- [ ] Add skill utilities to domain
  - [ ] Skill comparison methods
  - [ ] Skill validation helpers

## Dev Notes

### Relevant Source Tree Info
- Normalization service: `src/SmartScheduler.Application/Contracts/Services/ISkillNormalizationService.cs`
- Skill utilities: `src/SmartScheduler.Domain/Contracts/ValueObjects/Skill.cs` (if needed)

### Architecture References
- **Skills:** See `docs/architecture/data-models.md` for skill requirements
- **System Configuration:** Skills managed via Settings API - see Epic 9

### Testing Standards
- **Test Location:** `src/SmartScheduler.Application.Tests/`
- **Normalization Tests:** Test various skill formats
- **Validation Tests:** Test skill validation against configuration
- **Matching Tests:** Test skill set comparison logic

### UI Integration Notes
- Frontend uses `SkillCombobox` component (see `frontend/components/ui/skill-combobox.tsx`)
- Skills come from Settings API
- Frontend should display normalized skills consistently

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-XX | 1.0 | Initial story created | Sarah (PO) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_

