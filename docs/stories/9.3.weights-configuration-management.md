# Story 9.3: Weights Configuration Management

## Status
Approved

## Story

**As a** system administrator,
**I want** to manage scoring weights via UI,
**so that** I can tune the recommendation algorithm.

## Acceptance Criteria

1. **Weights UI:** UI to view and edit scoring weights
2. **Weight Display:** Current weights displayed
3. **Weight Editing:** Weights can be edited
4. **Config Version:** Config version displayed
5. **Validation:** Weights validated before save
6. **Version Creation:** New config version created on save
7. **Rollback:** Ability to rollback to previous version
8. **Notes:** Notes/audit trail for changes
9. **Authorization:** Admin-only access
10. **Testing:** Comprehensive tests

## Tasks / Subtasks

- [ ] Create weights management UI
  - [ ] Display current weights
  - [ ] Form for editing weights
  - [ ] Show config version
- [ ] Implement weight editing
  - [ ] Load current weights
  - [ ] Allow editing
  - [ ] Validate inputs
- [ ] Implement weight save
  - [ ] Create new config version
  - [ ] Save to config store
  - [ ] Include change notes
- [ ] Implement rollback
  - [ ] List previous versions
  - [ ] Allow rollback to previous version
  - [ ] Confirm rollback
- [ ] Add validation
  - [ ] Validate weight ranges
  - [ ] Validate required fields
  - [ ] Client and server validation
- [ ] Add change notes
  - [ ] Require notes on changes
  - [ ] Store notes with version
  - [ ] Display notes in history
- [ ] Add authorization
  - [ ] Admin-only access
  - [ ] Verify permissions
- [ ] Create API endpoints
  - [ ] GET /admin/weights/current
  - [ ] POST /admin/weights
  - [ ] GET /admin/weights/history
  - [ ] POST /admin/weights/rollback

## Dev Notes

### Relevant Source Tree Info
- Weights UI: `frontend/app/settings/weights/` (new)
- API endpoints: `src/SmartScheduler.Api/Endpoints/Admin/Weights/`
- Config service: Uses weights config from Story 5.1

### Architecture References
- **Weights Config:** See `docs/prd/c-scoring-tuning.md`
- **Config Storage:** SSM Parameter Store/AppConfig - see `docs/prd/c-weights-regional-settings-appconfigparameter-store.md`
- **Versioning:** Config versioning - see Epic 5.1

### Testing Standards
- **Test Location:** `src/SmartScheduler.Api.Tests/` and `frontend/__tests__/`
- **API Tests:** Test weights management, versioning, rollback
- **UI Tests:** Test weights editing, validation

### UI Integration Notes
- Weights management UI needs to be created
- May be part of Settings page or separate admin page
- UI should show current weights and allow editing

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-XX | 1.0 | Initial story created | Sarah (PO) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_

