# API Client Generation Rule

## Overview
When generating the TypeScript API client from the backend OpenAPI specification, **ALWAYS use the script method** instead of running NSwag directly.

## Method
Use the `generate-api-client.sh` script which:
1. Builds the API
2. Starts the API server in the background
3. Waits for the API to be ready (health check)
4. Fetches the OpenAPI spec from the running API at `/swagger/v1/swagger.json`
5. Generates the TypeScript client using `nswag openapi2tsclient`
6. Stops the server automatically

## Command
**Linux/Mac (Bash):**
```bash
./scripts/generate-api-client.sh
```

**Windows (Git Bash or WSL):**
```bash
./scripts/generate-api-client.sh
```

## Why This Method?
- The API must be running to generate an accurate OpenAPI spec
- The script handles all the complexity (starting/stopping server, waiting for readiness)
- Ensures the spec is generated from the actual running API, not just compiled code
- Automatically cleans up background processes

## DO NOT
- ❌ Run `nswag run nswag.json` directly (this won't work if API isn't running)
- ❌ Try to generate from a static OpenAPI file without the API running
- ❌ Manually start/stop the API server for client generation

## When to Regenerate
Regenerate the API client when:
- Backend API endpoints are added, modified, or removed
- Request/response DTOs change
- Before starting frontend development on a new feature
- After completing backend stories that add/modify API endpoints

## Generated Output
The client is generated to:
```
frontend/lib/api/generated/api-client.ts
```

**⚠️ DO NOT EDIT THIS FILE MANUALLY** - It will be overwritten on regeneration.
